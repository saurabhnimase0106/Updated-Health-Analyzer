<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Health Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome (for modern icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        // Restored Dark Theme Colors
                        'primary-blue': '#60a5fa', /* Lighter blue for dark theme */
                        'primary-gradient-start': '#1d4ed8',
                        'primary-gradient-end': '#3b82f6',
                        'dark-bg': '#0f172a', /* Deep Slate */
                    }
                }
            }
        }
    </script>
    <style>
        /* Restored Glass Card Style */
        .glass-card {
            background: rgba(255, 255, 255, 0.08); /* Very slight transparency */
            backdrop-filter: blur(15px); /* Strong blur effect */
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15); /* Light border for definition */
            border-radius: 1rem; /* match rounded-2xl */
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            background: rgba(255, 255, 255, 0.12);
        }
        
        /* Input Field Style for Dark Theme */
        .dark-input {
            background-color: rgba(255, 255, 255, 0.05);
            color: #f3f4f6;
            border-color: rgba(255, 255, 255, 0.15);
        }
        .dark-input:focus {
             border-color: #60a5fa;
             box-shadow: 0 0 0 1px #60a5fa;
        }

        /* Loading Dots */
        .loading-dot {
            animation: dot-flashing 1s infinite alternate;
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: white;
            border-radius: 50%;
            margin: 0 2px;
            opacity: 0;
        }
        .loading-dot:nth-child(1) { animation-delay: 0s; }
        .loading-dot:nth-child(2) { animation-delay: 0.3s; }
        .loading-dot:nth-child(3) { animation-delay: 0.6s; }
        @keyframes dot-flashing {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
        .gradient-button {
            background-image: linear-gradient(to right, var(--tw-gradient-stops));
            --tw-gradient-from: #1d4ed8;
            --tw-gradient-to: #3b82f6;
            --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
        }
        .gradient-button:hover {
             --tw-gradient-from: #1e40af;
             --tw-gradient-to: #2563eb;
        }
    </style>
</head>
<body class="bg-dark-bg min-h-screen p-4 sm:p-8 font-sans text-gray-100">

    <!-- Header & Title -->
    <header class="mb-8 max-w-6xl mx-auto">
        <h1 class="text-4xl font-extrabold text-gray-50 flex items-center">
            <i class="fas fa-heartbeat text-primary-blue mr-3 w-8 text-center"></i>
            Advanced Health Analyzer (Local Mock)
        </h1>
        <p class="text-gray-400 mt-1">Input your details for a personalized, structured diagnosis, prognosis, and plan.</p>
    </header>

    <main class="max-w-6xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Input / Control Panel (Left Column) -->
            <div class="lg:col-span-1">
                <div class="glass-card p-6 rounded-2xl mb-6">
                    <h2 class="text-xl font-bold text-gray-50 mb-4 border-b border-gray-700 pb-2">Health Input</h2>
                    <form id="analysisForm">
                        <div class="mb-4">
                            <label for="symptoms" class="block text-sm font-semibold text-gray-300 mb-2">Primary Symptoms & Conditions (Use any language):</label>
                            <textarea id="symptoms" rows="6" class="w-full p-3 dark-input rounded-xl focus:ring-primary-blue focus:border-primary-blue transition resize-none" placeholder="e.g., 'Mild fever and cough for three days.' (Try English, Hindi, or Marathi to test translation!)"></textarea>
                        </div>
                        
                        <!-- Advanced Input Options -->
                        <div class="mb-6 space-y-3 p-4 bg-gray-800 rounded-xl border border-gray-700">
                            <label class="block text-sm font-semibold text-gray-300">Advanced Details (Optional but Recommended):</label>
                            <div class="flex space-x-4">
                                <input type="number" id="age" placeholder="Age (e.g., 35)" class="w-1/2 p-2 dark-input rounded-lg focus:ring-primary-blue focus:border-primary-blue transition" min="1">
                                <select id="gender" class="w-1/2 p-2 dark-input rounded-lg focus:ring-primary-blue focus:border-primary-blue transition">
                                    <option value="">Gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <!-- LANGUAGE SELECTOR -->
                            <select id="language" class="w-full p-2 dark-input rounded-lg focus:ring-primary-blue focus:border-primary-blue transition font-semibold text-gray-300">
                                <option value="English">Output Language: English</option>
                                <option value="Hindi">Output Language: Hindi (рд╣рд┐рдВрджреА)</option>
                                <option value="Marathi">Output Language: Marathi (рдорд░рд╛рдареА)</option>
                                <option value="Tamil">Output Language: Tamil (родрооро┐ро┤рпН)</option>
                                <option value="Bengali">Output Language: Bengali (ржмрж╛ржВрж▓рж╛)</option>
                                <option value="Spanish">Output Language: Spanish (Espa├▒ol)</option>
                            </select>
                            <input type="text" id="duration" placeholder="Symptom Duration (e.g., '2 days')" class="w-full p-2 dark-input rounded-lg focus:ring-primary-blue focus:border-primary-blue transition">
                        </div>

                        <button type="submit" id="analyzeButton" class="w-full gradient-button text-white font-bold py-3 px-4 rounded-xl transition duration-300 shadow-lg hover:shadow-xl flex justify-center items-center">
                            <i class="fas fa-microscope mr-2"></i>
                            Analyze Health
                            <!-- Loading indicator removed from use -->
                        </button>
                        <p id="error-message" class="text-red-400 text-sm mt-3 hidden"></p>
                    </form>
                </div>

                <!-- Analysis Graph Card (Risk Metrics) -->
                <div class="glass-card p-6 rounded-2xl mb-6">
                    <h2 class="text-xl font-bold text-gray-50 mb-4 border-b border-gray-700 pb-2 flex items-center">
                        <i class="fas fa-chart-line text-red-400 mr-2"></i>
                        Risk Metrics (Visual Analysis)
                    </h2>
                    <div id="riskMetricsDisplay" class="h-64 flex flex-col justify-end p-2 bg-gray-800 rounded-xl border border-gray-700">
                    </div>
                </div>

                <!-- NEW: Report History Toggle Button (Matches user's image) -->
                <div id="historyToggleButton" class="glass-card p-4 rounded-xl mb-6 cursor-pointer hover:bg-white/10 transition duration-150 flex items-center justify-center">
                    <!-- Clock Icon -->
                    <i id="historyIcon" class="fas fa-clock text-lg mr-3 text-gray-200"></i>
                    <!-- Button Text -->
                    <span id="historyButtonText" class="text-lg font-semibold text-gray-50">Show Report History</span>
                </div>
                
                <!-- History Card (Collapsible) -->
                <div id="historyContainer" class="glass-card p-6 rounded-2xl hidden">
                    <h2 class="text-xl font-bold text-gray-50 mb-4 border-b border-gray-700 pb-2 flex items-center">
                        <i class="fas fa-history text-purple-400 mr-2"></i>
                        Analysis History
                    </h2>
                    <div id="historyList" class="space-y-3 max-h-80 overflow-y-auto pr-2">
                        <!-- History items will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Results Panel (Right Columns) -->
            <div class="lg:col-span-2 space-y-6">

                <!-- Overall Advanced Analysis Card -->
                <div class="glass-card p-6 rounded-2xl">
                    <h2 class="text-xl font-bold text-gray-50 mb-3 border-b border-gray-700 pb-2 flex items-center">
                        <i class="fas fa-stethoscope text-green-400 mr-2"></i>
                        Diagnosis & Advanced Summary
                    </h2>
                    <div id="diagnosisSummary" class="text-gray-300 leading-relaxed italic">
                        <!-- Content inserted by JS -->
                    </div>
                </div>

                <!-- Prognosis & Next Steps Card -->
                <div class="glass-card p-6 rounded-2xl">
                    <h2 class="text-xl font-bold text-gray-50 mb-3 border-b border-gray-700 pb-2 flex items-center">
                        <i class="fas fa-shoe-prints text-cyan-400 mr-2"></i>
                        Prognosis & Next Steps
                    </h2>
                    <div id="prognosisList" class="space-y-3">
                        <!-- Content inserted by JS -->
                    </div>
                </div>

                <!-- Medications/Remedies Card -->
                <div class="glass-card p-6 rounded-2xl">
                    <h2 class="text-xl font-bold text-gray-50 mb-3 border-b border-gray-700 pb-2 flex items-center">
                        <i class="fas fa-pills text-indigo-400 mr-2"></i>
                        Medications & Home Remedies
                    </h2>
                    <div id="medicationList" class="space-y-3">
                        <!-- Content inserted by JS -->
                    </div>
                </div>

                <!-- Diet & Lifestyle Card -->
                <div class="glass-card p-6 rounded-2xl">
                    <h2 class="text-xl font-bold text-gray-50 mb-3 border-b border-gray-700 pb-2 flex items-center">
                        <i class="fas fa-apple-alt text-amber-400 mr-2"></i>
                        Diet & Lifestyle Plan
                    </h2>
                    <div id="dietPlanList" class="space-y-3">
                        <!-- Content inserted by JS -->
                    </div>
                </div>

            </div>
        </div>
    </main>

    <script type="module">
        
        // =========================================================
        // DOM ELEMENTS 
        // =========================================================
        const form = document.getElementById('analysisForm');
        const symptomsInput = document.getElementById('symptoms');
        const ageInput = document.getElementById('age');
        const genderInput = document.getElementById('gender');
        const durationInput = document.getElementById('duration');
        const languageInput = document.getElementById('language');
        const analyzeButton = document.getElementById('analyzeButton');
        const errorMessage = document.getElementById('error-message');

        const diagnosisSummaryDiv = document.getElementById('diagnosisSummary');
        const prognosisListDiv = document.getElementById('prognosisList');
        const medicationListDiv = document.getElementById('medicationList');
        const dietPlanListDiv = document.getElementById('dietPlanList');
        const riskMetricsDisplay = document.getElementById('riskMetricsDisplay');
        
        // HISTORY ELEMENTS
        const historyListDiv = document.getElementById('historyList');
        const historyContainer = document.getElementById('historyContainer'); // The whole card
        const historyToggleButton = document.getElementById('historyToggleButton');
        const historyButtonText = document.getElementById('historyButtonText');
        const historyIcon = document.getElementById('historyIcon');

        // =========================================================
        // MOCK DATA STRUCTURES - рдЕрдм 3 рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП
        // =========================================================
        
        // 1. рд╕рд╛рдорд╛рдиреНрдп рд╡рд╛рдпрд░рд▓ рд╕рдВрдХреНрд░рдордг (Common Viral Infection)
        const MOCK_RESULTS_VIRAL_ENGLISH = {
            diagnosisSummary: "Based on the reported symptoms of fever, cough, and fatigue, the likely assessment points towards a common viral infection, such as the cold or flu. The body is fighting the infection. Adequate rest and hydration are key to recovery. Please monitor symptoms closely.",
            medicationsAndRemedies: [
                { name: "Acetaminophen (Paracetamol)", type: "OTC", description: "Use for fever and headache relief, strictly following dosage instructions." },
                { name: "Honey & Ginger Tea", type: "Home Remedy", description: "Effective for soothing a persistent dry cough and throat irritation." },
                { name: "Vapor Rub/Steam Inhalation", type: "Home Remedy", description: "Helps clear nasal passages and ease breathing congestion." }
            ],
            dietPlan: [
                { category: "Focus On", items: "Warm broths, vegetable soups, and easily digestible foods like rice or toast." },
                { category: "Avoid", items: "Sugary drinks, heavy fried foods, and highly processed snacks that stress the digestive system." },
                { category: "Hydration", items: "Drink at least 8-10 glasses of water, herbal tea, or electrolyte solution daily." }
            ],
            riskMetrics: [
                { metric: "Infection Severity", value: 65 },
                { metric: "Dehydration Risk", value: 45 },
                { metric: "Fatigue Level", value: 80 }
            ],
            prognosisAndNextSteps: [
                { step: "If fever exceeds 102┬░F (38.9┬░C) or difficulty breathing occurs, seek medical attention immediately.", urgency: "Immediate Care", icon: "ЁЯЪи" },
                { step: "Consult a doctor if symptoms worsen or persist beyond 7 days.", urgency: "Consult Doctor", icon: "ЁЯУЕ" },
                { step: "Prioritize 8-10 hours of sleep per night and reduce strenuous activity.", urgency: "Routine", icon: "ЁЯЫМ" }
            ]
        };

        const MOCK_RESULTS_VIRAL_HINDI = {
            diagnosisSummary: "рддреАрди рджрд┐рдиреЛрдВ рд╕реЗ рд╣рд▓реНрдХреЗ рдмреБрдЦрд╛рд░, рдЦрд╛рдВрд╕реА рдФрд░ рдердХрд╛рди рдХреЗ рд▓рдХреНрд╖рдгреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рд╕рдВрднрд╛рд╡рд┐рдд рдореВрд▓реНрдпрд╛рдВрдХрди рд╕рд╛рдорд╛рдиреНрдп рд╡рд╛рдпрд░рд▓ рд╕рдВрдХреНрд░рдордг, рдЬреИрд╕реЗ рдХрд┐ рд╕рд╛рдорд╛рдиреНрдп рд╕рд░реНрджреА рдпрд╛ рдЗрдиреНрдлреНрд▓реВрдПрдВрдЬрд╛ (рдлреНрд▓реВ) рдХреА рдУрд░ рдЗрд╢рд╛рд░рд╛ рдХрд░рддрд╛ рд╣реИред рд╢рд░реАрд░ рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рд╕рдВрдХреНрд░рдордг рд╕реЗ рд▓рдбрд╝ рд░рд╣рд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдХрд╛рд░рдг рдпреЗ рд▓рдХреНрд╖рдг рд╣реЛ рд░рд╣реЗ рд╣реИрдВред рдареАрдХ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдЖрд░рд╛рдо рдФрд░ рд╣рд╛рдЗрдбреНрд░реЗрд╢рди рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВред рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рдгреЛрдВ рдкрд░ рдмрд╛рд░реАрдХреА рд╕реЗ рдирдЬрд╝рд░ рд░рдЦреЗрдВред",
            medicationsAndRemedies: [
                { name: "рдПрд╕рд┐рдЯрд╛рдорд┐рдиреЛрдлреЗрди (рдкреЗрд░рд╛рд╕рд┐рдЯрд╛рдореЛрд▓)", type: "рдУрдЯреАрд╕реА", description: "рдмреБрдЦрд╛рд░ рдФрд░ рд╕рд┐рд░рджрд░реНрдж рд╕реЗ рд░рд╛рд╣рдд рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░реЗрдВ, рдЦреБрд░рд╛рдХ рдХреЗ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рд╕рдЦреНрддреА рд╕реЗ рдкрд╛рд▓рди рдХрд░реЗрдВред" },
                { name: "рд╢рд╣рдж рдФрд░ рдЕрджрд░рдХ рдХреА рдЪрд╛рдп", type: "рдШрд░реЗрд▓реВ рдЙрдкрд╛рдп", description: "рд▓рдЧрд╛рддрд╛рд░ рд╕реВрдЦреА рдЦрд╛рдВрд╕реА рдФрд░ рдЧрд▓реЗ рдХреА рдЬрд▓рди рдХреЛ рд╢рд╛рдВрдд рдХрд░рдиреЗ рдореЗрдВ рдкреНрд░рднрд╛рд╡реАред" },
                { name: "рднрд╛рдк рд▓реЗрдирд╛ (рд╕реНрдЯреАрдо рдЗрдирд╣реЗрд▓реЗрд╢рди)", type: "рдШрд░реЗрд▓реВ рдЙрдкрд╛рдп", description: "рдирд╛рдХ рдХреЗ рдорд╛рд░реНрдЧ рдХреЛ рд╕рд╛рдл рдХрд░рдиреЗ рдФрд░ рд╕рд╛рдВрд╕ рд▓реЗрдиреЗ рдХреА рддрдХрд▓реАрдл рдХреЛ рдХрдо рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред" }
            ],
            dietPlan: [
                { category: "рдЗрди рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ", items: "рдЧрд░реНрдо рд╢реЛрд░рдмрд╛, рд╕рдмреНрдЬреА рдХрд╛ рд╕реВрдк, рдФрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рдкрдЪрдиреЗ рд╡рд╛рд▓реЗ рдЦрд╛рджреНрдп рдкрджрд╛рд░реНрде рдЬреИрд╕реЗ рдЪрд╛рд╡рд▓ рдпрд╛ рдЯреЛрд╕реНрдЯред" },
                { category: "рдЗрдирд╕реЗ рдмрдЪреЗрдВ", items: "рд╢рдХреНрдХрд░ рдпреБрдХреНрдд рдкреЗрдп, рднрд╛рд░реА рддрд▓реЗ рд╣реБрдП рдЦрд╛рджреНрдп рдкрджрд╛рд░реНрде, рдФрд░ рдЕрддреНрдпрдзрд┐рдХ рдкреНрд░рд╕рдВрд╕реНрдХреГрдд рд╕реНрдиреИрдХреНрд╕ рдЬреЛ рдкрд╛рдЪрди рддрдВрддреНрд░ рдкрд░ рддрдирд╛рд╡ рдбрд╛рд▓рддреЗ рд╣реИрдВред" },
                { category: "рд╣рд╛рдЗрдбреНрд░реЗрд╢рди", items: "рд░реЛрдЬрд╛рдирд╛ рдХрдо рд╕реЗ рдХрдо 8-10 рдЧрд┐рд▓рд╛рд╕ рдкрд╛рдиреА, рд╣рд░реНрдмрд▓ рдЪрд╛рдп, рдпрд╛ рдЗрд▓реЗрдХреНрдЯреНрд░реЛрд▓рд╛рдЗрдЯ рдШреЛрд▓ рдкрд┐рдПрдВред" }
            ],
            riskMetrics: [
                { metric: "рд╕рдВрдХреНрд░рдордг рдХреА рдЧрдВрднреАрд░рддрд╛", value: 65 },
                { metric: "рдирд┐рд░реНрдЬрд▓реАрдХрд░рдг рдХрд╛ рдЬреЛрдЦрд┐рдо", value: 45 },
                { metric: "рдердХрд╛рди рдХрд╛ рд╕реНрддрд░", value: 80 }
            ],
            prognosisAndNextSteps: [
                { step: "рдпрджрд┐ рдмреБрдЦрд╛рд░ 102┬░F (38.9┬░C) рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдпрд╛ рд╕рд╛рдВрд╕ рд▓реЗрдиреЗ рдореЗрдВ рдХрдард┐рдирд╛рдИ рд╣реЛрддреА рд╣реИ, рддреЛ рддреБрд░рдВрдд рдЪрд┐рдХрд┐рддреНрд╕рд╛ рд╕рд╣рд╛рдпрддрд╛ рд▓реЗрдВред", urgency: "рддрддреНрдХрд╛рд▓ рджреЗрдЦрднрд╛рд▓", icon: "ЁЯЪи" },
                { step: "рдпрджрд┐ рд▓рдХреНрд╖рдг рдмрд┐рдЧрдбрд╝рддреЗ рд╣реИрдВ рдпрд╛ 7 рджрд┐рдиреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рд╕рдордп рддрдХ рдмрдиреЗ рд░рд╣рддреЗ рд╣реИрдВ рддреЛ рдбреЙрдХреНрдЯрд░ рд╕реЗ рдкрд░рд╛рдорд░реНрд╢ рдХрд░реЗрдВред", urgency: "рдбреЙрдХреНрдЯрд░ рд╕реЗ рдкрд░рд╛рдорд░реНрд╢ рдХрд░реЗрдВ", icon: "ЁЯУЕ" },
                { step: "рдкреНрд░рддрд┐ рд░рд╛рдд 8-10 рдШрдВрдЯреЗ рдХреА рдиреАрдВрдж рдХреЛ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рджреЗрдВ рдФрд░ рдЬрд╝реЛрд░рджрд╛рд░ рдЧрддрд┐рд╡рд┐рдзрд┐ рдХрдо рдХрд░реЗрдВред", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯЫМ" }
            ]
        };

        const MOCK_RESULTS_VIRAL_MARATHI = {
            diagnosisSummary: "рддреАрди рджрд┐рд╡рд╕рд╛рдВрдкрд╛рд╕реВрди рд╕реМрдореНрдп рддрд╛рдк, рдЦреЛрдХрд▓рд╛ рдЖрдгрд┐ рдердХрд╡рд╛ рдпрд╛ рд▓рдХреНрд╖рдгрд╛рдВрд╡рд░ рдЖрдзрд╛рд░рд┐рдд, рд╕рдВрднрд╛рд╡реНрдп рдореВрд▓реНрдпрд╛рдВрдХрди рд╕рд╛рдорд╛рдиреНрдп рд╡реНрд╣рд╛рдпрд░рд▓ рд╕рдВрд╕рд░реНрдЧ, рдЬрд╕реЗ рдХреА рд╕рд╛рдорд╛рдиреНрдп рд╕рд░реНрджреА рдХрд┐рдВрд╡рд╛ рдЗрдиреНрдлреНрд▓реВрдПрдВрдЬрд╛ (рдлреНрд▓реВ) рдХрдбреЗ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рддреЗ. рд╢рд░реАрд░ рд╕рдХреНрд░рд┐рдпрдкрдгреЗ рд╕рдВрд╕рд░реНрдЧрд╛рд╢реА рд▓рдврдд рдЖрд╣реЗ, рдЬреНрдпрд╛рдореБрд│реЗ рд╣реА рд▓рдХреНрд╖рдгреЗ рджрд┐рд╕рдд рдЖрд╣реЗрдд. рд▓рд╡рдХрд░ рдмрд░реЗ рд╣реЛрдгреНрдпрд╛рд╕рд╛рдареА рдкреБрд░реЗрд╕рд╛ рдЖрд░рд╛рдо рдЖрдгрд┐ рд╣рд╛рдпрдбреНрд░реЗрд╢рди рдорд╣рддреНрддреНрд╡рд╛рдЪреЗ рдЖрд╣реЗ. рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рдгрд╛рдВрдЪреЗ рдмрд╛рд░рдХрд╛рдИрдиреЗ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рд╛.",
            medicationsAndRemedies: [
                { name: "рдПрд╕реАрдЯрд╛рдорд┐рдиреЛрдлреЗрди (рдкреЕрд░рд╛рд╕рд┐рдЯрд╛рдореЙрд▓)", type: "рдУрдЯреАрд╕реА", description: "рддрд╛рдк рдЖрдгрд┐ рдбреЛрдХреЗрджреБрдЦреАрдкрд╛рд╕реВрди рдЖрд░рд╛рдо рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд╛, рдорд╛рддреНрд░ рдбреЛрд╕рдЪреНрдпрд╛ рд╕реВрдЪрдирд╛рдВрдЪреЗ рдХрд╛рдЯреЗрдХреЛрд░рдкрдгреЗ рдкрд╛рд▓рди рдХрд░рд╛." },
                { name: "рдордз рдЖрдгрд┐ рдЖрд▓реЗ рдЪрд╣рд╛", type: "рдШрд░рдЧреБрддреА рдЙрдкрд╛рдп", description: "рд╕рддрддрдЪрд╛ рдХреЛрд░рдбрд╛ рдЦреЛрдХрд▓рд╛ рдЖрдгрд┐ рдШрд╢рд╛рддреАрд▓ рдЬрд│рдЬрд│ рд╢рд╛рдВрдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдкреНрд░рднрд╛рд╡реА." },
                { name: "рд╡рд╛рдл рдШреЗрдгреЗ (рд╕реНрдЯреАрдо рдЗрдирд╣реЗрд▓реЗрд╢рди)", type: "рдШрд░рдЧреБрддреА рдЙрдкрд╛рдп", description: "рдирд╛рдХрд╛рддреАрд▓ рдорд╛рд░реНрдЧ рд╕рд╛рдл рдХрд░рдгреНрдпрд╛рд╕ рдЖрдгрд┐ рд╢реНрд╡рд╛рд╕ рдШреЗрдгреНрдпрд╛рд╕ рдорджрдд рдХрд░рддреЗ." }
            ],
            dietPlan: [
                { category: "рдпрд╛рд╡рд░ рд▓рдХреНрд╖ рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рд╛", items: "рдЧрд░рдо рд░рд╕реНрд╕рд╛, рднрд╛рдЬреАрдкрд╛рд▓рд╛ рд╕реВрдк рдЖрдгрд┐ рд╕рд╣рдЬ рдкрдЪрдгрд╛рд░реЗ рдкрджрд╛рд░реНрде рдЬрд╕реЗ рдХреА рднрд╛рдд рдХрд┐рдВрд╡рд╛ рдЯреЛрд╕реНрдЯ." },
                { category: "рдЯрд╛рд│рд╛", items: "рд╕рд╛рдЦрд░рдпреБрдХреНрдд рдкреЗрдп, рдЬрдб рддрд│рд▓реЗрд▓реЗ рдкрджрд╛рд░реНрде рдЖрдгрд┐ рдЬрд╛рд╕реНрдд рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗрд▓реЗрд▓реЗ рд╕реНрдиреЕрдХреНрд╕ рдЬреЗ рдкрд╛рдЪрди рддрдВрддреНрд░рд╛рд╡рд░ рддрд╛рдг рджреЗрддрд╛рдд." },
                { category: "рд╣рд╛рдпрдбреНрд░реЗрд╢рди", items: "рджрд░рд░реЛрдЬ рдХрд┐рдорд╛рди 8-10 рдЧреНрд▓рд╛рд╕ рдкрд╛рдгреА, рд╣рд░реНрдмрд▓ рдЪрд╣рд╛ рдХрд┐рдВрд╡рд╛ рдЗрд▓реЗрдХреНрдЯреНрд░реЛрд▓рд╛рдЗрдЯ рджреНрд░рд╛рд╡рдг рдкреНрдпрд╛." }
            ],
            riskMetrics: [
                { metric: "рд╕рдВрд╕рд░реНрдЧрд╛рдЪреА рддреАрд╡реНрд░рддрд╛", value: 65 },
                { metric: "рдирд┐рд░реНрдЬрд▓реАрдХрд░рдгрдЪрд╛ рдзреЛрдХрд╛", value: 45 },
                { metric: "рдердХрд╡реНрдпрд╛рдЪреА рдкрд╛рддрд│реА", value: 80 }
            ],
            prognosisAndNextSteps: [
                { step: "рдЬрд░ рддрд╛рдк 102┬░F (38.9┬░C) рдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рд╡рд╛рдврд▓рд╛ рдХрд┐рдВрд╡рд╛ рд╢реНрд╡рд╛рд╕ рдШреЗрдгреНрдпрд╛рд╕ рдЕрдбрдЪрдг рдЖрд▓реА, рддрд░ рддреНрд╡рд░рд┐рдд рд╡реИрджреНрдпрдХреАрдп рдорджрдд рдШреНрдпрд╛.", urgency: "рддреНрд╡рд░рд┐рдд рдХрд╛рд│рдЬреА", icon: "ЁЯЪи" },
                { step: "рд▓рдХреНрд╖рдгреЗ рдмрд┐рдШрдбрд▓реНрдпрд╛рд╕ рдХрд┐рдВрд╡рд╛ 7 рджрд┐рд╡рд╕рд╛рдВрдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдХрд╛рд│ рдЯрд┐рдХреВрди рд░рд╛рд╣рд┐рд▓реНрдпрд╛рд╕ рдбреЙрдХреНрдЯрд░рд╛рдВрдЪрд╛ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛.", urgency: "рдбреЙрдХреНрдЯрд░рд╛рдВрдЪрд╛ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛", icon: "ЁЯУЕ" },
                { step: "рд░рд╛рддреНрд░реА 8-10 рддрд╛рд╕ рдЭреЛрдкреЗрд▓рд╛ рдкреНрд░рд╛рдзрд╛рдиреНрдп рджреНрдпрд╛ рдЖрдгрд┐ рдХрдареЛрд░ рд╢рд╛рд░реАрд░рд┐рдХ рд╣рд╛рд▓рдЪрд╛рд▓ рдХрдореА рдХрд░рд╛.", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯЫМ" }
            ]
        };

        // 2. рдкреЗрдЯ рдХрд╛ рдлреНрд▓реВ (Stomach Flu / Gastroenteritis)
        const MOCK_RESULTS_STOMACH_FLU_ENGLISH = {
            diagnosisSummary: "Based on your symptoms (nausea, vomiting, and abdominal discomfort), the assessment points towards Acute Gastroenteritis, commonly known as the stomach flu. This is typically a viral infection. Rest and maintaining electrolyte balance are critical.",
            medicationsAndRemedies: [
                { name: "Oral Rehydration Solution (ORS)", type: "OTC", description: "To replenish lost fluids and electrolytes due to vomiting or diarrhea." },
                { name: "Bland Diet (BRAT)", type: "Home Remedy", description: "Consume small, frequent meals of easily digestible foods like bananas, rice, applesauce, and toast." },
                { name: "Ginger (fresh/tea)", type: "Home Remedy", description: "Helps soothe nausea and improve digestion." }
            ],
            dietPlan: [
                { category: "Focus On", items: "Clear liquids, electrolytes, bananas, rice, and plain crackers." },
                { category: "Avoid", items: "Dairy products, high-fat foods, caffeine, and spicy items for 48 hours." },
                { category: "Hydration", items: "Sip small amounts of water or ORS frequently, rather than large quantities at once." }
            ],
            riskMetrics: [
                { metric: "Infection Severity", value: 75 },
                { metric: "Dehydration Risk", value: 85 },
                { metric: "Fatigue Level", value: 60 }
            ],
            prognosisAndNextSteps: [
                { step: "If symptoms persist beyond 3 days or you cannot keep fluids down, seek medical attention immediately.", urgency: "Immediate Care", icon: "ЁЯЪи" },
                { step: "Rest completely for 24 hours and gradually resume normal activity.", urgency: "Routine", icon: "ЁЯЫМ" },
                { step: "Wash hands thoroughly and often to prevent spreading the virus.", urgency: "Routine", icon: "ЁЯз╝" }
            ]
        };
        
        const MOCK_RESULTS_STOMACH_FLU_HINDI = {
            diagnosisSummary: "рдЖрдкрдХреЗ рд▓рдХреНрд╖рдгреЛрдВ (рдорддрд▓реА, рдЙрд▓реНрдЯреА, рдФрд░ рдкреЗрдЯ рдореЗрдВ рдмреЗрдЪреИрдиреА) рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдореВрд▓реНрдпрд╛рдВрдХрди рддреАрд╡реНрд░ рдЬрдард░рд╛рдВрддреНрд░ рд╢реЛрде (Acute Gastroenteritis), рдЬрд┐рд╕реЗ рдЖрдорддреМрд░ рдкрд░ рдкреЗрдЯ рдХрд╛ рдлреНрд▓реВ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреА рдУрд░ рдЗрд╢рд╛рд░рд╛ рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЖрдо рддреМрд░ рдкрд░ рдПрдХ рд╡рд╛рдпрд░рд▓ рд╕рдВрдХреНрд░рдордг рд╣реИред рдЖрд░рд╛рдо рдФрд░ рдЗрд▓реЗрдХреНрдЯреНрд░реЛрд▓рд╛рдЗрдЯ рд╕рдВрддреБрд▓рди рдмрдирд╛рдП рд░рдЦрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред",
            medicationsAndRemedies: [
                { name: "рдУрд░рд▓ рд░рд┐рд╣рд╛рдЗрдбреНрд░реЗрд╢рди рдШреЛрд▓ (рдУрдЖрд░рдПрд╕)", type: "рдУрдЯреАрд╕реА", description: "рдЙрд▓реНрдЯреА рдпрд╛ рджрд╕реНрдд рдХреЗ рдХрд╛рд░рдг рдЦреЛрдП рд╣реБрдП рддрд░рд▓ рдкрджрд╛рд░реНрде рдФрд░ рдЗрд▓реЗрдХреНрдЯреНрд░реЛрд▓рд╛рдЗрдЯреНрд╕ рдХреА рдкреВрд░реНрддрд┐ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред" },
                { name: "рд╕рд╛рджрд╛ рдЖрд╣рд╛рд░ (BRAT)", type: "рдШрд░реЗрд▓реВ рдЙрдкрд╛рдп", description: "рдХреЗрд▓рд╛, рдЪрд╛рд╡рд▓, рд╕реЗрдм рдХреА рдЪрдЯрдиреА, рдФрд░ рдЯреЛрд╕реНрдЯ рдЬреИрд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ рдкрдЪрдиреЗ рд╡рд╛рд▓реЗ рдЦрд╛рджреНрдп рдкрджрд╛рд░реНрдереЛрдВ рдХреЛ рдХрдо рдорд╛рддреНрд░рд╛ рдореЗрдВ рдмрд╛рд░-рдмрд╛рд░ рдЦрд╛рдПрдВред" },
                { name: "рдЕрджрд░рдХ (рддрд╛рдЬрд╝рд╛/рдЪрд╛рдп)", type: "рдШрд░реЗрд▓реВ рдЙрдкрд╛рдп", description: "рдорддрд▓реА рдХреЛ рд╢рд╛рдВрдд рдХрд░рдиреЗ рдФрд░ рдкрд╛рдЪрди рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред" }
            ],
            dietPlan: [
                { category: "рдЗрди рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ", items: "рд╕рд╛рдл рддрд░рд▓ рдкрджрд╛рд░реНрде, рдЗрд▓реЗрдХреНрдЯреНрд░реЛрд▓рд╛рдЗрдЯреНрд╕, рдХреЗрд▓реЗ, рдЪрд╛рд╡рд▓ рдФрд░ рд╕рд╛рджреЗ рдкрдЯрд╛рдЦреЗред" },
                { category: "рдЗрдирд╕реЗ рдмрдЪреЗрдВ", items: "рдбреЗрдпрд░реА рдЙрддреНрдкрд╛рдж, рдЙрдЪреНрдЪ рд╡рд╕рд╛ рд╡рд╛рд▓реЗ рдЦрд╛рджреНрдп рдкрджрд╛рд░реНрде, рдХреИрдлреАрди, рдФрд░ рдорд╕рд╛рд▓реЗрджрд╛рд░ рдЪреАрдЬреЗрдВ 48 рдШрдВрдЯреЛрдВ рдХреЗ рд▓рд┐рдПред" },
                { category: "рд╣рд╛рдЗрдбреНрд░реЗрд╢рди", items: "рдПрдХ рдмрд╛рд░ рдореЗрдВ рдмрдбрд╝реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдкрд╛рдиреА рдХреЗ рдмрдЬрд╛рдп, рдзреАрд░реЗ-рдзреАрд░реЗ рдкрд╛рдиреА рдпрд╛ рдУрдЖрд░рдПрд╕ рдХреА рдЫреЛрдЯреА рдШреВрдВрдЯ рд▓реЗрдВред" }
            ],
            riskMetrics: [
                { metric: "рд╕рдВрдХреНрд░рдордг рдХреА рдЧрдВрднреАрд░рддрд╛", value: 75 },
                { metric: "рдирд┐рд░реНрдЬрд▓реАрдХрд░рдг рдХрд╛ рдЬреЛрдЦрд┐рдо", value: 85 },
                { metric: "рдердХрд╛рди рдХрд╛ рд╕реНрддрд░", value: 60 }
            ],
            prognosisAndNextSteps: [
                { step: "рдпрджрд┐ рд▓рдХреНрд╖рдг 3 рджрд┐рдиреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рд╕рдордп рддрдХ рдмрдиреЗ рд░рд╣рддреЗ рд╣реИрдВ рдпрд╛ рдЖрдк рддрд░рд▓ рдкрджрд╛рд░реНрде рдирд╣реАрдВ рд░реЛрдХ рдкрд╛ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рддреБрд░рдВрдд рдЪрд┐рдХрд┐рддреНрд╕рд╛ рд╕рд╣рд╛рдпрддрд╛ рд▓реЗрдВред", urgency: "рддрддреНрдХрд╛рд▓ рджреЗрдЦрднрд╛рд▓", icon: "ЁЯЪи" },
                { step: "24 рдШрдВрдЯреЗ рдкреВрд░реА рддрд░рд╣ рдЖрд░рд╛рдо рдХрд░реЗрдВ рдФрд░ рдзреАрд░реЗ-рдзреАрд░реЗ рд╕рд╛рдорд╛рдиреНрдп рдЧрддрд┐рд╡рд┐рдзрд┐ рд╢реБрд░реВ рдХрд░реЗрдВред", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯЫМ" },
                { step: "рд╡рд╛рдпрд░рд╕ рдХреЛ рдлреИрд▓рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рд╣рд╛рдереЛрдВ рдХреЛ рдЕрдЪреНрдЫреА рддрд░рд╣ рдФрд░ рдмрд╛рд░-рдмрд╛рд░ рдзреЛрдПрдВред", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯз╝" }
            ]
        };

        const MOCK_RESULTS_STOMACH_FLU_MARATHI = {
            diagnosisSummary: "рддреБрдордЪреНрдпрд╛ рд▓рдХреНрд╖рдгрд╛рдВрд╡рд░ (рдорд│рдорд│, рдЙрд▓рдЯреНрдпрд╛ рдЖрдгрд┐ рдУрдЯреАрдкреЛрдЯрд╛рдд рдЕрд╕реНрд╡рд╕реНрдерддрд╛) рдЖрдзрд╛рд░рд┐рдд, рд╕рдВрднрд╛рд╡реНрдп рдореВрд▓реНрдпрд╛рдВрдХрди рддреАрд╡реНрд░ рдЬрдард░рд╛рдВрддреНрд░ рд╢реЛрде (Acute Gastroenteritis), рдЬреНрдпрд╛рд▓рд╛ рд╕рд╛рдорд╛рдиреНрдпрддрдГ 'рдкреЛрдЯрд╛рдЪрд╛ рдлреНрд▓реВ' рдореНрд╣рдгрддрд╛рдд, рдпрд╛рдХрдбреЗ рдирд┐рд░реНрджреЗрд╢ рдХрд░рддреЗ. рд╣рд╛ рд╕рд╛рдорд╛рдиреНрдпрддрдГ рдПрдХ рд╡реНрд╣рд╛рдпрд░рд▓ рд╕рдВрд╕рд░реНрдЧ рдЖрд╣реЗ. рд╡рд┐рд╢реНрд░рд╛рдВрддреА рдЖрдгрд┐ рдЗрд▓реЗрдХреНрдЯреНрд░реЛрд▓рд╛рдЗрдЯ рд╕рдВрддреБрд▓рди рд░рд╛рдЦрдгреЗ рдорд╣рддреНрддреНрд╡рд╛рдЪреЗ рдЖрд╣реЗ.",
            medicationsAndRemedies: [
                { name: "рдУрд░рд▓ рд░рд┐рд╣рд╛рдЗрдбреНрд░реЗрд╢рди рд╕реЛрд▓реНрдпреВрд╢рди (ORS)", type: "рдУрдЯреАрд╕реА", description: "рдЙрд▓рдЯреНрдпрд╛ рдХрд┐рдВрд╡рд╛ рдЕрддрд┐рд╕рд╛рд░рд╛рдореБрд│реЗ рдЧрдорд╛рд╡рд▓реЗрд▓реЗ рджреНрд░рд╡ рдЖрдгрд┐ рдЗрд▓реЗрдХреНрдЯреНрд░реЛрд▓рд╛рдЗрдЯреНрд╕рдЪреА рднрд░рдкрд╛рдИ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд╛." },
                { name: "рд╕рд╛рдзрд╛ рдЖрд╣рд╛рд░ (BRAT)", type: "рдШрд░рдЧреБрддреА рдЙрдкрд╛рдп", description: "рдХреЗрд│реА, рднрд╛рдд, рд╕рдлрд░рдЪрдВрджрд╛рдЪреА рдЪрдЯрдгреА рдЖрдгрд┐ рдЯреЛрд╕реНрдЯрд╕рд╛рд░рдЦреЗ рд╕рд╣рдЬ рдкрдЪрдгрд╛рд░реЗ рдкрджрд╛рд░реНрде рдХрдореА рдкреНрд░рдорд╛рдгрд╛рдд рд╡рд╛рд░рдВрд╡рд╛рд░ рдЦрд╛." },
                { name: "рдЖрд▓реЗ (рддрд╛рдЬреЗ/рдЪрд╣рд╛)", type: "рдШрд░рдЧреБрддреА рдЙрдкрд╛рдп", description: "рдорд│рдорд│ рд╢рд╛рдВрдд рдХрд░рдгреНрдпрд╛рд╕ рдЖрдгрд┐ рдкрдЪрди рд╕реБрдзрд╛рд░рдгреНрдпрд╛рд╕ рдорджрдд рдХрд░рддреЗ." }
            ],
            dietPlan: [
                { category: "рдпрд╛рд╡рд░ рд▓рдХреНрд╖ рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рд╛", items: "рд╕реНрд╡рдЪреНрдЫ рдкрд╛рддрд│ рдкрджрд╛рд░реНрде, рдЗрд▓реЗрдХреНрдЯреНрд░реЛрд▓рд╛рдЗрдЯреНрд╕, рдХреЗрд│реА, рднрд╛рдд рдЖрдгрд┐ рд╕рд╛рдзреЗ рдХреНрд░реЕрдХрд░реНрд╕." },
                { category: "рдЯрд╛рд│рд╛", items: "рдбреЗрдЕрд░реА рдЙрддреНрдкрд╛рджрдиреЗ, рдЙрдЪреНрдЪ рдЪрд░рдмреАрдпреБрдХреНрдд рдкрджрд╛рд░реНрде, рдХреЕрдлрд┐рди рдЖрдгрд┐ рдорд╕рд╛рд▓реЗрджрд╛рд░ рд╡рд╕реНрддреВ 48 рддрд╛рд╕рд╛рдВрд╕рд╛рдареА." },
                { category: "рд╣рд╛рдпрдбреНрд░реЗрд╢рди", items: "рдПрдХрд╛рдЪ рд╡реЗрд│реА рдореЛрдареНрдпрд╛ рдкреНрд░рдорд╛рдгрд╛рдд рдкрд╛рдгреА рдкрд┐рдгреНрдпрд╛рдРрд╡рдЬреА, рдереЛрдбреЗ рдереЛрдбреЗ рдкрд╛рдгреА рдХрд┐рдВрд╡рд╛ ORS рдкреНрдпрд╛." }
            ],
            riskMetrics: [
                { metric: "рд╕рдВрд╕рд░реНрдЧрд╛рдЪреА рддреАрд╡реНрд░рддрд╛", value: 75 },
                { metric: "рдирд┐рд░реНрдЬрд▓реАрдХрд░рдгрдЪрд╛ рдзреЛрдХрд╛", value: 85 },
                { metric: "рдердХрд╡реНрдпрд╛рдЪреА рдкрд╛рддрд│реА", value: 60 }
            ],
            prognosisAndNextSteps: [
                { step: "рдЬрд░ рд▓рдХреНрд╖рдгреЗ 3 рджрд┐рд╡рд╕рд╛рдВрдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдХрд╛рд│ рдЯрд┐рдХреВрди рд░рд╛рд╣рд┐рд▓реА рдХрд┐рдВрд╡рд╛ рдЖрдкрдг рджреНрд░рд╡рдкрджрд╛рд░реНрде рд╢рд░реАрд░рд╛рдд рдЯрд┐рдХрд╡реВрди рдареЗрд╡реВ рд╢рдХрдд рдирд╕рд╛рд▓, рддрд░ рддреНрд╡рд░рд┐рдд рд╡реИрджреНрдпрдХреАрдп рдорджрдд рдШреНрдпрд╛.", urgency: "рддреНрд╡рд░рд┐рдд рдХрд╛рд│рдЬреА", icon: "ЁЯЪи" },
                { step: "24 рддрд╛рд╕ рдкреВрд░реНрдгрдкрдгреЗ рд╡рд┐рд╢реНрд░рд╛рдВрддреА рдШреНрдпрд╛ рдЖрдгрд┐ рд╣рд│реВрд╣рд│реВ рд╕рд╛рдорд╛рдиреНрдп рдХреНрд░рд┐рдпрд╛рдХрд▓рд╛рдк рдкреБрдиреНрд╣рд╛ рд╕реБрд░реВ рдХрд░рд╛.", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯЫМ" },
                { step: "рд╡рд┐рд╖рд╛рдгреВрдЪрд╛ рдкреНрд░рд╕рд╛рд░ рд░реЛрдЦрдгреНрдпрд╛рд╕рд╛рдареА рд╣рд╛рдд рдЪрд╛рдВрдЧрд▓реЗ рдЖрдгрд┐ рд╡рд╛рд░рдВрд╡рд╛рд░ рдзреБрд╡рд╛.", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯз╝" }
            ]
        };

        // 3. ре▓рд▓рд░реНрдЬреА (Allergy)
        const MOCK_RESULTS_ALLERGY_ENGLISH = {
            diagnosisSummary: "The consistent symptoms of sneezing, itchy eyes, and runny nose, especially if seasonal, strongly suggest Allergic Rhinitis (Hay Fever). This is an immune response to environmental triggers like pollen or dust.",
            medicationsAndRemedies: [
                { name: "Antihistamines (e.g., Cetirizine)", type: "OTC", description: "Take once daily to block histamine and relieve sneezing and itching." },
                { name: "Nasal Saline Rinse", type: "Home Remedy", description: "Use to wash away allergens and clear nasal passages." },
                { name: "Eye Drops (Antihistamine)", type: "OTC", description: "Use as needed for relief from itchy and watery eyes." }
            ],
            dietPlan: [
                { category: "Focus On", items: "Foods rich in Vitamin C (citrus, bell peppers) and Omega-3s (nuts, fish) to support immune function." },
                { category: "Avoid", items: "Foods that may cross-react with pollen, such as bananas, melons, or sunflower seeds (Oral Allergy Syndrome)." },
                { category: "Lifestyle", items: "Keep windows closed during high pollen days and change clothes after being outdoors." }
            ],
            riskMetrics: [
                { metric: "Inflammation Level", value: 55 },
                { metric: "Breathing Obstruction", value: 30 },
                { metric: "Discomfort Level", value: 70 }
            ],
            prognosisAndNextSteps: [
                { step: "If symptoms worsen to include wheezing or difficulty breathing, consult a specialist (Allergist).", urgency: "Consult Doctor", icon: "ЁЯУЕ" },
                { step: "Track symptoms daily to identify specific triggers (pollen, dust).", urgency: "Routine", icon: "ЁЯУК" },
                { step: "Limit exposure to known allergens, especially in the mornings.", urgency: "Routine", icon: "ЁЯМ│" }
            ]
        };

        const MOCK_RESULTS_ALLERGY_HINDI = {
            diagnosisSummary: "рдЫреАрдВрдХрдиреЗ, рдЖрдВрдЦреЛрдВ рдореЗрдВ рдЦреБрдЬрд▓реА рдФрд░ рдирд╛рдХ рдмрд╣рдиреЗ рдХреЗ рд▓рдЧрд╛рддрд╛рд░ рд▓рдХреНрд╖рдг, рдЦрд╛рд╕рдХрд░ рдпрджрд┐ рд╡реЗ рдореМрд╕рдореА рд╣реИрдВ, рддреЛ рджреГрдврд╝рддрд╛ рд╕реЗ рдПрд▓рд░реНрдЬрд┐рдХ рд░рд╛рдЗрдирд╛рдЗрдЯрд┐рд╕ (рдкрд░рд╛рдЧ рдЬреНрд╡рд░) рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддреЗ рд╣реИрдВред рдпрд╣ рдкрд░рд╛рдЧ рдпрд╛ рдзреВрд▓ рдЬреИрд╕реЗ рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рдЯреНрд░рд┐рдЧрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рддрд┐рд░рдХреНрд╖рд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╣реИред",
            medicationsAndRemedies: [
                { name: "рдПрдВрдЯреАрд╣рд┐рд╕реНрдЯрд╛рдорд╛рдЗрдиреНрд╕ (рдЬреИрд╕реЗ, рд╕реЗрдЯрд┐рд░рд┐рдЬрд╝рд┐рди)", type: "рдУрдЯреАрд╕реА", description: "рд╣рд┐рд╕реНрдЯрд╛рдорд╛рдЗрди рдХреЛ рд░реЛрдХрдиреЗ рдФрд░ рдЫреАрдВрдХрдиреЗ рдФрд░ рдЦреБрдЬрд▓реА рд╕реЗ рд░рд╛рд╣рдд рдХреЗ рд▓рд┐рдП рджрд┐рди рдореЗрдВ рдПрдХ рдмрд╛рд░ рд▓реЗрдВред" },
                { name: "рдиреЗрдЬрд▓ рд╕рд▓рд╛рдЗрди рд░рд┐рдВрд╕", type: "рдШрд░реЗрд▓реВ рдЙрдкрд╛рдп", description: "рдПрд▓рд░реНрдЬреА рдХрд╛рд░рдХреЛрдВ рдХреЛ рдзреЛрдиреЗ рдФрд░ рдирд╛рдХ рдХреЗ рдорд╛рд░реНрдЧ рдХреЛ рд╕рд╛рдл рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред" },
                { name: "рдЖрдИ рдбреНрд░реЙрдкреНрд╕ (рдПрдВрдЯреАрд╣рд┐рд╕реНрдЯрд╛рдорд╛рдЗрди)", type: "рдУрдЯреАрд╕реА", description: "рдЖрдВрдЦреЛрдВ рдореЗрдВ рдЦреБрдЬрд▓реА рдФрд░ рдкрд╛рдиреА рдЖрдиреЗ рд╕реЗ рд░рд╛рд╣рдд рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред" }
            ],
            dietPlan: [
                { category: "рдЗрди рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ", items: "рдкреНрд░рддрд┐рд░рдХреНрд╖рд╛ рдХрд╛рд░реНрдп рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдЯрд╛рдорд┐рди рд╕реА (рдЦрдЯреНрдЯреЗ рдлрд▓, рд╢рд┐рдорд▓рд╛ рдорд┐рд░реНрдЪ) рдФрд░ рдУрдореЗрдЧрд╛-3 (рдореЗрд╡реЗ, рдордЫрд▓реА) рд╕реЗ рднрд░рдкреВрд░ рдЦрд╛рджреНрдп рдкрджрд╛рд░реНрдеред" },
                { category: "рдЗрдирд╕реЗ рдмрдЪреЗрдВ", items: "рдРрд╕реЗ рдЦрд╛рджреНрдп рдкрджрд╛рд░реНрде рдЬреЛ рдкрд░рд╛рдЧ (pollen) рдХреЗ рд╕рд╛рде рдХреНрд░реЙрд╕-рд░рд┐рдПрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХреЗрд▓рд╛, рддрд░рдмреВрдЬ, рдпрд╛ рд╕реВрд░рдЬрдореБрдЦреА рдХреЗ рдмреАрдЬ (рдУрд░рд▓ рдПрд▓рд░реНрдЬреА рд╕рд┐рдВрдбреНрд░реЛрдо)ред" },
                { category: "рдЬреАрд╡рдирд╢реИрд▓реА", items: "рдЕрдзрд┐рдХ рдкрд░рд╛рдЧ рд╡рд╛рд▓реЗ рджрд┐рдиреЛрдВ рдореЗрдВ рдЦрд┐рдбрд╝рдХрд┐рдпрд╛рдВ рдмрдВрдж рд░рдЦреЗрдВ рдФрд░ рдмрд╛рд╣рд░ рд░рд╣рдиреЗ рдХреЗ рдмрд╛рдж рдХрдкрдбрд╝реЗ рдмрджрд▓реЗрдВред" }
            ],
            riskMetrics: [
                { metric: "рд╕реВрдЬрди рдХрд╛ рд╕реНрддрд░", value: 55 },
                { metric: "рд╕рд╛рдБрд╕ рдореЗрдВ рд░реБрдХрд╛рд╡рдЯ", value: 30 },
                { metric: "рдЕрд╕реБрд╡рд┐рдзрд╛ рдХрд╛ рд╕реНрддрд░", value: 70 }
            ],
            prognosisAndNextSteps: [
                { step: "рдпрджрд┐ рд▓рдХреНрд╖рдг рдмрд┐рдЧрдбрд╝рддреЗ рд╣реИрдВ рдФрд░ рдШрд░рдШрд░рд╛рд╣рдЯ рдпрд╛ рд╕рд╛рдБрд╕ рд▓реЗрдиреЗ рдореЗрдВ рдХрдард┐рдирд╛рдИ рд╣реЛрддреА рд╣реИ, рддреЛ рдХрд┐рд╕реА рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (рдПрд▓рд░реНрдЬрд┐рд╕реНрдЯ) рд╕реЗ рдкрд░рд╛рдорд░реНрд╢ рдХрд░реЗрдВред", urgency: "рдбреЙрдХреНрдЯрд░ рд╕реЗ рдкрд░рд╛рдорд░реНрд╢ рдХрд░реЗрдВ", icon: "ЁЯУЕ" },
                { step: "рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЯреНрд░рд┐рдЧрд░ (рдкрд░рд╛рдЧ, рдзреВрд▓) рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреИрдирд┐рдХ рд░реВрдк рд╕реЗ рд▓рдХреНрд╖рдгреЛрдВ рдкрд░ рдирдЬрд╝рд░ рд░рдЦреЗрдВред", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯУК" },
                { step: "рдЬреНрдЮрд╛рдд рдПрд▓рд░реНрдЬреА рдХрд╛рд░рдХреЛрдВ рдХреЗ рд╕рдВрдкрд░реНрдХ рдХреЛ рд╕реАрдорд┐рдд рдХрд░реЗрдВ, рдЦрд╛рд╕рдХрд░ рд╕реБрдмрд╣ рдХреЗ рд╕рдордпред", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯМ│" }
            ]
        };

        const MOCK_RESULTS_ALLERGY_MARATHI = {
            diagnosisSummary: "рд╢рд┐рдВрдХрд╛ рдпреЗрдгреЗ, рдбреЛрд│реНрдпрд╛рдВрдирд╛ рдЦрд╛рдЬ рд╕реБрдЯрдгреЗ рдЖрдгрд┐ рдирд╛рдХ рдЧрд│рдгреЗ рдпрд╛рдВрд╕рд╛рд░рдЦреА рд╕рддрддрдЪреА рд▓рдХреНрд╖рдгреЗ, рд╡рд┐рд╢реЗрд╖рдд: рдЬрд░ рддреА рд╣рдВрдЧрд╛рдореА рдЕрд╕рддреАрд▓, рддрд░ ре▓рд▓рд░реНрдЬрд┐рдХ рд▒реНрд╣рд╛рдпрдирд┐рдЯрд┐рд╕ (рдкрд░рд╛рдЧрдЬреНрд╡рд░) рджрд░реНрд╢рд╡рддрд╛рдд. рд╣реА рдкрд░рд╛рдЧрдХрдг рдХрд┐рдВрд╡рд╛ рдзреВрд│ рдпрд╛рдВрд╕рд╛рд░рдЦреНрдпрд╛ рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рдШрдЯрдХрд╛рдВрдореБрд│реЗ рд╣реЛрдгрд╛рд░реА рд░реЛрдЧрдкреНрд░рддрд┐рдХрд╛рд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдЖрд╣реЗ.",
            medicationsAndRemedies: [
                { name: "рдЕрдБрдЯреАрд╣рд┐рд╕реНрдЯрд╛рдорд╛рдЗрдиреНрд╕ (рдЙрджрд╛. рд╕реЗрдЯрд┐рд░рд┐рдЭрд┐рди)", type: "рдУрдЯреАрд╕реА", description: "рд╣рд┐рд╕реНрдЯрд╛рдорд╛рдЗрди рдЕрд╡рд░реЛрдзрд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ рд╢рд┐рдВрдХрд╛ рдпреЗрдгреЗ рд╡ рдЦрд╛рдЬ рд╕реБрдЯрдгреНрдпрд╛рдкрд╛рд╕реВрди рдЖрд░рд╛рдо рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА рджрд░рд░реЛрдЬ рдПрдХрджрд╛ рдШреНрдпрд╛." },
                { name: "рдирд╛рдХрд╛рдд рд╕рд▓рд╛рдИрдирдЪреЗ рджреНрд░рд╛рд╡рдг", type: "рдШрд░рдЧреБрддреА рдЙрдкрд╛рдп", description: "ре▓рд▓рд░реНрдЬреАрдХрд╛рд░рдХ рдШрдЯрдХ рдзреБрд╡реВрди рдЯрд╛рдХрдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ рдирд╛рдХрд╛рдЪреЗ рдорд╛рд░реНрдЧ рд╕рд╛рдл рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд╛." },
                { name: "рдбреЛрд│реНрдпрд╛рдЪреЗ рдбреНрд░реЙрдкреНрд╕ (рдЕрдБрдЯреАрд╣рд┐рд╕реНрдЯрд╛рдорд╛рдЗрди)", type: "рдУрдЯреАрд╕реА", description: "рдбреЛрд│реНрдпрд╛рдВрдЪреА рдЦрд╛рдЬ рдЖрдгрд┐ рдкрд╛рдгреА рдпреЗрдгреНрдпрд╛рдкрд╛рд╕реВрди рдЖрд░рд╛рдо рдорд┐рд│рдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╡рд╢реНрдпрдХрддреЗрдиреБрд╕рд╛рд░ рд╡рд╛рдкрд░рд╛." }
            ],
            dietPlan: [
                { category: "рдпрд╛рд╡рд░ рд▓рдХреНрд╖ рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рд╛", items: "рд░реЛрдЧрдкреНрд░рддрд┐рдХрд╛рд░ рдХрд╛рд░реНрдпрд╛рд╕рд╛рдареА рд╡реНрд╣рд┐рдЯреЕрдорд┐рди рд╕реА (рд▓рд┐рдВрдмреВрд╡рд░реНрдЧреАрдп рдлрд│реЗ, рдвреЛрдмрд│реА рдорд┐рд░рдЪреА) рдЖрдгрд┐ рдУрдореЗрдЧрд╛-3 (рдирдЯ, рдорд╛рд╕реЗ) рдордзреНрдпреЗ рд╕рдореГрджреНрдз рдЕрд╕рд▓реЗрд▓реЗ рдкрджрд╛рд░реНрде рдЦрд╛." },
                { category: "рдЯрд╛рд│рд╛", items: "рдкрд░рд╛рдЧрдХрдгрд╛рдВрд╢реА (pollen) рдХреНрд░реЙрд╕-рд░рд┐ре▓рдХреНрдЯ рд╣реЛрдгрд╛рд░реЗ рдкрджрд╛рд░реНрде, рдЬрд╕реЗ рдХреА рдХреЗрд│реА, рдЦрд░рдмреВрдЬ, рдХрд┐рдВрд╡рд╛ рд╕реВрд░реНрдпрдлреВрд▓ рдмрд┐рдпрд╛ (рдУрд░рд▓ ре▓рд▓рд░реНрдЬреА рд╕рд┐рдВрдбреНрд░реЛрдо)." },
                { category: "рдЬреАрд╡рдирд╢реИрд▓реА", items: "рдЬрд╛рд╕реНрдд рдкрд░рд╛рдЧрдХрдг рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рджрд┐рд╡рд╕рд╛рдВрдордзреНрдпреЗ рдЦрд┐рдбрдХреНрдпрд╛ рдмрдВрдж рдареЗрд╡рд╛ рдЖрдгрд┐ рдмрд╛рд╣реЗрд░реВрди рдЖрд▓реНрдпрд╛рд╡рд░ рдХрдкрдбреЗ рдмрджрд▓рд╛." }
            ],
            riskMetrics: [
                { metric: "рд╕реВрдЬ рдкрд╛рддрд│реА", value: 55 },
                { metric: "рд╢реНрд╡рд╛рд╕ рдЕрдбрдерд│рд╛", value: 30 },
                { metric: "рдЕрд╕реНрд╡рд╕реНрдерддрд╛ рдкрд╛рддрд│реА", value: 70 }
            ],
            prognosisAndNextSteps: [
                { step: "рдЬрд░ рд▓рдХреНрд╖рдгреЗ рд╡рд╛рдвреВрди рд╢реНрд╡рд╛рд╕ рдШреЗрдгреНрдпрд╛рд╕ рдЕрдбрдерд│рд╛ рдХрд┐рдВрд╡рд╛ рдШрд░рдШрд░ рдЬрд╛рдгрд╡рдд рдЕрд╕реЗрд▓, рддрд░ рддрдЬреНрдЮрд╛рдВрдЪрд╛ (ре▓рд▓рд░реНрдЬрд┐рд╕реНрдЯ) рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛.", urgency: "рдбреЙрдХреНрдЯрд░рд╛рдВрдЪрд╛ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛", icon: "ЁЯУЕ" },
                { step: "рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЯреНрд░рд┐рдЧрд░ (рдкрд░рд╛рдЧрдХрдг, рдзреВрд│) рдУрд│рдЦрдгреНрдпрд╛рд╕рд╛рдареА рд▓рдХреНрд╖рдгрд╛рдВрдЪрд╛ рджрд░рд░реЛрдЬ рдорд╛рдЧреЛрд╡рд╛ рдШреНрдпрд╛.", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯУК" },
                { step: "рдЬреНрдЮрд╛рдд ре▓рд▓рд░реНрдЬреАрдХрд╛рд░рдХ рдШрдЯрдХрд╛рдВрдЪреНрдпрд╛ рд╕рдВрдкрд░реНрдХрд╛рдд рдпреЗрдгреЗ рдорд░реНрдпрд╛рджрд┐рдд рдХрд░рд╛, рд╡рд┐рд╢реЗрд╖рдд: рд╕рдХрд╛рд│реА.", urgency: "рдирд┐рдпрдорд┐рдд", icon: "ЁЯМ│" }
            ]
        };

        /**
         * рдореБрдЦреНрдп рдореЙрдХ рдлрд╝рдВрдХреНрд╢рди рдЬреЛ рд▓рдХреНрд╖рдгреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдкрд░рд┐рдгрд╛рдо рдЪреБрдирддрд╛ рд╣реИред
         * Handles keyword analysis (English only) and returns results in the requested language.
         */
        function generateMockHealthAnalysis(symptoms, language) {
            const normalizedSymptoms = symptoms.toLowerCase();
            let resultType;
            let mockEnglishData;

            // 1. Determine Result Type based on English Keywords (рд╕рдореАрдХреНрд╖рд╛)
            if (normalizedSymptoms.includes('stomach') || normalizedSymptoms.includes('vomit') || normalizedSymptoms.includes('diarrhea') || normalizedSymptoms.includes('рдкреЗрдЯ')) {
                resultType = 'stomach_flu';
                mockEnglishData = MOCK_RESULTS_STOMACH_FLU_ENGLISH;
            } else if (normalizedSymptoms.includes('sneeze') || normalizedSymptoms.includes('itchy') || normalizedSymptoms.includes('allergy') || normalizedSymptoms.includes('рдЦреБрдЬрд▓реА') || normalizedSymptoms.includes('рдЫреАрдВрдХ')) {
                resultType = 'allergy';
                mockEnglishData = MOCK_RESULTS_ALLERGY_ENGLISH;
            } else {
                resultType = 'viral'; // Default for cough, fever, etc.
                mockEnglishData = MOCK_RESULTS_VIRAL_ENGLISH;
            }

            // 2. Map English Data to the requested Output Language (рднрд╛рд╖рд╛ рдореЗрдВ рд░реВрдкрд╛рдВрддрд░рдг)
            if (language === 'Hindi') {
                if (resultType === 'stomach_flu') return MOCK_RESULTS_STOMACH_FLU_HINDI;
                if (resultType === 'allergy') return MOCK_RESULTS_ALLERGY_HINDI;
                return MOCK_RESULTS_VIRAL_HINDI;
            } else if (language === 'Marathi') {
                if (resultType === 'stomach_flu') return MOCK_RESULTS_STOMACH_FLU_MARATHI;
                if (resultType === 'allergy') return MOCK_RESULTS_ALLERGY_MARATHI;
                return MOCK_RESULTS_VIRAL_MARATHI;
            } else {
                // Return English for default, English, or other unsupported languages
                return mockEnglishData;
            }
        }
        
        // --- Rendering Functions (mostly unchanged) ---
        
        function renderDiagnosisSummary(summary) {
            diagnosisSummaryDiv.innerHTML = `
                <p class="text-lg font-bold text-gray-50 mb-2">Likely Assessment:</p>
                <p class="text-gray-300 leading-relaxed">${summary}</p>
                <div class="mt-4 p-3 bg-red-900/40 text-red-300 border-l-4 border-red-500 rounded-lg">
                    <p class="font-bold">Disclaimer:</p>
                    <p class="text-sm">This analysis is for informational purposes only and is not a substitute for professional medical advice, diagnosis, or treatment. Always seek the advice of a qualified health provider.</p>
                </div>
            `;
        }
        
        function renderPrognosis(steps) {
            prognosisListDiv.innerHTML = steps.map(item => {
                let colorClass = 'bg-green-700/40 text-green-300 border-green-700';
                if (item.urgency.includes('Immediate') || item.urgency.includes('рддрддреНрдХрд╛рд▓') || item.urgency.includes('рддреНрд╡рд░рд┐рдд')) {
                    colorClass = 'bg-red-700/40 text-red-300 border-red-700';
                } else if (item.urgency.includes('Consult') || item.urgency.includes('рдкрд░рд╛рдорд░реНрд╢')) {
                    colorClass = 'bg-yellow-700/40 text-yellow-300 border-yellow-700';
                }
                
                return `
                    <div class="p-4 glass-card rounded-xl hover:bg-white/10 transition duration-150 flex justify-between items-center">
                        <div class="flex items-center">
                            <span class="mr-3 text-2xl">${item.icon || 'ЁЯУЭ'}</span>
                            <p class="text-sm text-gray-300">${item.step}</p>
                        </div>
                        <span class="ml-4 text-xs font-semibold px-3 py-1 rounded-full border ${colorClass}">
                            ${item.urgency}
                        </span>
                    </div>
                `;
            }).join('');
            if (steps.length === 0) {
                prognosisListDiv.innerHTML = '<p class="text-gray-500">No specific action steps or prognosis provided.</p>';
            }
        }

        function renderMedications(meds) {
            medicationListDiv.innerHTML = meds.map(med => `
                <div class="p-4 glass-card rounded-xl hover:bg-white/10 transition duration-150">
                    <p class="font-semibold text-primary-blue">${med.name} 
                        <span class="ml-2 text-xs font-normal px-2 py-1 rounded-full ${med.type.includes('Prescription') ? 'bg-red-700/40 text-red-300' : med.type.includes('OTC') || med.type.includes('рдУрдЯреАрд╕реА') ? 'bg-indigo-700/40 text-indigo-300' : 'bg-green-700/40 text-green-300'}">
                            ${med.type}
                        </span>
                    </p>
                    <p class="text-sm text-gray-400 mt-1">${med.description}</p>
                </div>
            `).join('');
            if (meds.length === 0) {
                medicationListDiv.innerHTML = '<p class="text-gray-500">No specific medications suggested at this time.</p>';
            }
        }

        function renderDietPlan(dietPlan) {
            dietPlanListDiv.innerHTML = dietPlan.map(item => `
                <div class="p-4 glass-card rounded-xl hover:bg-white/10 transition duration-150 flex items-start">
                    <span class="mr-3 text-2xl">${item.category.includes('Avoid') || item.category.includes('рдЯрд╛рд│рд╛') ? 'ЁЯЪл' : item.category.includes('Focus') || item.category.includes('рдзреНрдпрд╛рди') ? 'ЁЯеж' : item.category.includes('Hydration') || item.category.includes('рд╣рд╛рдпрдбреНрд░реЗрд╢рди') ? 'ЁЯТз' : 'ЁЯзШ'}</span>
                    <div>
                        <p class="font-semibold text-gray-50">${item.category}</p>
                        <p class="text-sm text-gray-400">${item.items}</p>
                    </div>
                </div>
            `).join('');
            if (dietPlan.length === 0) {
                dietPlanListDiv.innerHTML = '<p class="text-gray-500">No specific diet or lifestyle advice provided.</p>';
            }
        }
        
        function renderRiskMetricsGraph(metrics) {
            riskMetricsDisplay.innerHTML = '';
            // const maxVal = 100; // Unused, kept for context
            
            riskMetricsDisplay.classList.remove('justify-end', 'flex-col'); 
            riskMetricsDisplay.classList.add('flex-row', 'items-end', 'h-64', 'justify-around');

            const graphHTML = metrics.map(metric => {
                const height = Math.max(10, metric.value);
                let colorClass = 'bg-green-500';
                if (metric.value > 75) {
                    colorClass = 'bg-red-500';
                } else if (metric.value > 50) {
                    colorClass = 'bg-yellow-500';
                }

                return `
                    <div class="flex flex-col items-center mx-1 h-full justify-end group cursor-pointer" style="width: 28%;">
                        <div class="text-xs font-bold mb-1 text-gray-300">${metric.value}%</div>
                        <div class="w-full rounded-t-lg transition-all duration-700 ease-out ${colorClass} hover:opacity-90" 
                                style="height: ${height}%;" 
                                title="${metric.metric}: ${metric.value}%">
                        </div>
                        <p class="text-xs text-center mt-2 text-gray-400 font-semibold w-full whitespace-nowrap overflow-hidden text-ellipsis" title="${metric.metric}">${metric.metric}</p>
                    </div>
                `;
            }).join('');

            riskMetricsDisplay.innerHTML = `
                <div class="flex items-end justify-around w-full h-full p-2">
                    ${graphHTML}
                </div>
            `;
        }

        // --- HISTORY MANAGEMENT FUNCTIONS (Modified for Toggle) ---

        const HISTORY_STORAGE_KEY = 'healthAnalysisHistory';

        /**
         * Loads the history array from LocalStorage.
         */
        function loadHistory() {
            const historyJson = localStorage.getItem(HISTORY_STORAGE_KEY);
            try {
                return historyJson ? JSON.parse(historyJson) : [];
            } catch (e) {
                console.error("Error parsing history from LocalStorage:", e);
                return []; // Return empty array on parse error
            }
        }

        /**
         * Saves a new analysis result to LocalStorage and updates the history list.
         */
        function saveAndRenderHistory(inputSymptoms, analysisResult) {
            const history = loadHistory();
            const newEntry = {
                id: Date.now(),
                date: new Date().toLocaleString(),
                input: inputSymptoms.substring(0, 50) + (inputSymptoms.length > 50 ? '...' : ''),
                fullResult: analysisResult,
                riskScore: analysisResult.riskMetrics.find(m => m.metric.includes('Severity'))?.value || 'N/A'
            };

            // Add new entry to the front (most recent first)
            history.unshift(newEntry);
            
            // Limit history size (e.g., last 10 entries)
            const trimmedHistory = history.slice(0, 10);
            
            localStorage.setItem(HISTORY_STORAGE_KEY, JSON.stringify(trimmedHistory));
            
            // Render the updated history list
            renderHistoryList(trimmedHistory);
        }

        /**
         * Renders the history list items and attaches click listeners.
         */
        function renderHistoryList(history) {
            if (!history || history.length === 0) {
                historyListDiv.innerHTML = '<p class="text-gray-500 text-sm italic">No past analyses found. Run an analysis to save it here.</p>';
                return;
            }

            historyListDiv.innerHTML = history.map(entry => {
                let colorClass = 'text-green-400';
                if (entry.riskScore > 75) {
                    colorClass = 'text-red-400';
                } else if (entry.riskScore > 50) {
                    colorClass = 'text-yellow-400';
                }

                return `
                    <div class="p-3 glass-card rounded-xl border border-gray-700 cursor-pointer hover:bg-white/10 transition duration-150 history-item" data-id="${entry.id}">
                        <p class="font-bold text-sm text-gray-50 flex justify-between items-center">
                            <span class="truncate pr-2">${entry.input}</span>
                            <span class="text-xs font-mono ${colorClass}">${entry.riskScore}%</span>
                        </p>
                        <p class="text-xs text-gray-400 mt-1">${entry.date}</p>
                    </div>
                `;
            }).join('');

            // Attach event listeners to newly rendered items
            historyListDiv.querySelectorAll('.history-item').forEach(item => {
                item.addEventListener('click', function() {
                    const history = loadHistory();
                    const selectedId = parseInt(this.getAttribute('data-id'));
                    const selectedEntry = history.find(e => e.id === selectedId);
                    
                    if (selectedEntry) {
                        renderAnalysisResults(selectedEntry.fullResult);
                        // Scroll to the diagnosis section for better UX
                        document.getElementById('diagnosisSummary').scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        }

        // Unified rendering function to be used by both form submission and history click
        function renderAnalysisResults(analysisData) {
            renderDiagnosisSummary(analysisData.diagnosisSummary);
            renderPrognosis(analysisData.prognosisAndNextSteps);
            renderMedications(analysisData.medicationsAndRemedies);
            renderDietPlan(analysisData.dietPlan);
            renderRiskMetricsGraph(analysisData.riskMetrics);
        }

        // --- Toggle Logic ---

        function toggleHistoryVisibility() {
            const isHidden = historyContainer.classList.toggle('hidden');
            
            // Update button text and icon
            if (isHidden) {
                historyButtonText.textContent = 'Show Report History';
                historyIcon.classList.remove('fa-times-circle');
                historyIcon.classList.add('fa-clock');
                historyIcon.classList.remove('text-red-400');
                historyIcon.classList.add('text-gray-200');

            } else {
                historyButtonText.textContent = 'Hide Report History';
                historyIcon.classList.remove('fa-clock');
                historyIcon.classList.add('fa-times-circle');
                historyIcon.classList.remove('text-gray-200');
                historyIcon.classList.add('text-red-400');
            }
        }
        
        // --- Initialization and Submission Logic (Modified) ---

        const initialDiagnosisText = "The overall analysis will be generated here, providing a comprehensive assessment based on your input.";
        const initialPrognosisText = "Key action steps and expected outcomes will be listed here.";
        const initialRemediesText = "Suggested medications, OTC relief, and home remedies will be listed here.";
        const initialDietText = "Customized diet and lifestyle recommendations will be provided here.";
        const initialGraphText = '<p class="text-center text-gray-500 py-20">Analysis graph will appear here after processing.</p>';

        function initializeUI() {
            diagnosisSummaryDiv.innerHTML = `<div class="text-gray-300 leading-relaxed italic">${initialDiagnosisText}</div>`;
            prognosisListDiv.innerHTML = `<div class="text-gray-400">${initialPrognosisText}</div>`;
            medicationListDiv.innerHTML = `<div class="text-gray-400">${initialRemediesText}</div>`;
            dietPlanListDiv.innerHTML = `<div class="text-gray-400">${initialDietText}</div>`;
            riskMetricsDisplay.innerHTML = initialGraphText;

            // LOAD HISTORY DATA
            renderHistoryList(loadHistory());
        }

        window.onload = initializeUI;

        // Attach Toggle Event Listener
        historyToggleButton.addEventListener('click', toggleHistoryVisibility);

        // Event Listener for Form Submission (MODIFIED to save history)
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const query = symptomsInput.value.trim();
            const language = languageInput.value;

            if (query.length < 5) {
                errorMessage.textContent = 'Please provide a detailed description.';
                errorMessage.classList.remove('hidden');
                return;
            } else {
                errorMessage.classList.add('hidden');
            }

            try {
                // 1. Get the Mock Data (symptoms and language passed to the new function)
                const analysisData = generateMockHealthAnalysis(query, language);

                // 2. Render Results
                renderAnalysisResults(analysisData);

                // 3. SAVE THE ANALYSIS TO HISTORY
                saveAndRenderHistory(query, analysisData);

            } catch (error) {
                console.error("Analysis Error (Caught):", error);
                
                // Enhanced, user-visible error message
                const userError = `<div class="mt-4 p-4 glass-card border border-red-500">
                                    <p class="font-bold text-red-400">Analysis Failed!</p>
                                    <p class="text-sm text-gray-300">A logic error occurred while generating the mock data. Please check the console.</p>
                                   </div>`;

                diagnosisSummaryDiv.innerHTML = userError;
                prognosisListDiv.innerHTML = `<p class="text-red-400 p-4">Error: See Diagnosis Summary for details.</p>`;
                medicationListDiv.innerHTML = `<p class="text-red-400 p-4">Error: Analysis failed.</p>`;
                dietPlanListDiv.innerHTML = `<p class="text-red-400 p-4">Error: Analysis failed.</p>`;
                riskMetricsDisplay.innerHTML = '<p class="text-center text-red-400 py-20">Failed to load graph data.</p>';
            }
        });
        
    </script>
</body>
</html>
